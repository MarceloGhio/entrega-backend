<h1>Productos en tiempo real</h1>
<ul id="products-list">
  {{#each products}}
    <li id="product-{{this._id}}">
      <strong>{{this.title}}</strong> — ${{this.price}} — Stock: {{this.stock}}
      <button onclick="addToCart('{{this._id}}')">Agregar al carrito</button>
      <button onclick="socketDelete('{{this._id}}')">Eliminar</button>
    </li>
  {{/each}}
</ul>

<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();
  socket.on('products:update', (products) => {
    const ul = document.getElementById('products-list');
    ul.innerHTML = '';
    products.forEach(p => {
      const li = document.createElement('li');
      li.id = 'product-' + p._id;
      li.innerHTML = `<strong>${p.title}</strong> — $${p.price} — Stock: ${p.stock}
        <button onclick="addToCart('${p._id}')">Agregar al carrito</button>
        <button onclick="socketDelete('${p._id}')">Eliminar</button>`;
      ul.appendChild(li);
    });
  });

  function socketDelete(id) {
    socket.emit('product:delete', id);
  }
</script>

<script src="/js/cart.js"></script>

